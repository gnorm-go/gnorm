// Code generated by gnorm, DO NOT EDIT!

package tables

import (
	"gnorm.org/gnorm/database/drivers/mssql/gnorm"
	"log"
)

// Row represents a row from 'TABLES'.
type Row struct {
	TableName    string // TABLE_NAME
	TableType    string // TABLE_TYPE
	TableCatalog string // TABLE_CATALOG
	TableSchema  string // TABLE_SCHEMA
	TableComment string //
}

// Query retrieves rows from 'TABLES' as a slice of Row.
func Query(db gnorm.DB, schema string) ([]*Row, error) {
	const sqlstr = `

SELECT TABLE_NAME,
       TABLE_TYPE,
       TABLE_CATALOG,
       TABLE_SCHEMA
       
  FROM INFORMATION_SCHEMA.TABLES
  WHERE TABLE_SCHEMA = ?
  ;
`
	log.Println("querying tables ", sqlstr)

	var vals []*Row
	q, err := db.Query(sqlstr, schema)
	if err != nil {
		return nil, err
	}
	for q.Next() {
		r := Row{}

		err = q.Scan(
			&r.TableName,
			&r.TableType,
			&r.TableCatalog,
			&r.TableSchema,
		)

		if err != nil {
			return nil, err
		}

		vals = append(vals, &r)
	}
	return vals, nil

}
